<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <!-- Compiled and minified CSS -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
      <!-- Compiled and minified JavaScript -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
      <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width, height=device-height">
      <link rel="stylesheet" type="text/css" href="css/sign_up_1.css" />
      <link rel="stylesheet" type="text/css" href="css/color.css" />

      <!-- 아이콘 불러오기 -->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

      <script>
        $(function() {
        });
      </script>

      <title>platfrom_test</title>

      <!-- <script>
      $(function() {
        $('#main_wrap').load("show_goods.html");
      });
      </script> -->
  </head>
  <body>
    <header>
      <div id="header_wrapper">
        <div id="back_btn_wrapper">
          <i id="back_btn" class="material-icons small">chevron_left</i>
        </div>
        <div class="page_title_wrapper">
          <span class="page_title"> 회원가입 </span>
        </div>
      </div>
    </header>

    <div id="sign_up_container" class="sign_up_container">
      <form id="personal_information_wrapper">
        <div class="input-field col s6">
          <span class="info_question">아이디</span>
          <a id="confirm_duplication" class="waves-effect waves-light btn confirm_btn">중복확인</a>
          <input placeholder="3-15자" id="input_id" type="text" class="input_id" autocapitalize="off">
          <label for="input_id"></label>
        </div>
        <div class="divider_gray"></div>
        <div class="input-field col s6">
          <span class="info_question">비밀번호</span>
          <input placeholder="8-16자 영문/숫자 조합으로 입력" id="input_password" type="password" class="input_password">
          <label for="input_password"></label>
        </div>
        <div class="divider_gray"></div>
        <div class="input-field col s6">
          <p class="info_question">비밀번호 확인</p>
          <input placeholder="비밀번호를 한번 더 입력해 주세요" id="input_password_confirm" type="password" class="input_password_confirm">
          <label for="input_password_confirm"></label>
        </div>
      </form>

      <form id="phone_confirm_wrapper">
        <div class="input-field col s6">
          <span class="info_question">- 제외 휴대폰 번호</span>
          <a id="send_confirm_num" class="waves-effect waves-light btn confirm_btn">인증번호발송</a>
          <input placeholder="-를 제외하고 입력해 주세요" id="input_phone_num" type="number" class="input_phone_num">
          <label for="input_phone_num"></label>
        </div>
        <div class="divider_gray"></div>
        <div class="input-field col s6">
          <span class="info_question">인증번호</span>
          <a id="input_confirm_num" class="waves-effect waves-light btn confirm_btn">확인</a>
          <input placeholder="인증번호를 입력 해 주세요" id="input_confirm_num" type="number" class="input_confirm_num">
          <label for="input_confirm_num"></label>
        </div>
      </form>

      <div class="agree_receive_sms_wrapper">
        <input type="checkbox" id="receive_sms">
        <label for="receive_sms" class="input-label receive_sms">SMS를 통해 코디몬스터의 다양한 정보를 받아보겠습니다.</label>
      </div>

      <p class="margin5vh"></p>

      <span class="access_terms">이용약관</span>
      <div class="access_terms_wrapper">
        <input type="checkbox" id="access_terms_agree_all">
        <label for="access_terms_agree_all" class="input-label access_terms_agree">약관 전체동의</label>
        <div class="divider_gray"></div>
        <input type="checkbox" id="access_terms_agree">
        <label for="access_terms_agree" class="input-label access_terms_agree">이용약관에 동의합니다.</label>
        <i class="access_terms_content material-icons small confirm_content_btn">chevron_right</i>
        <br>
        <input type="checkbox" id="access_terms_agree_personal_info">
        <label for="access_terms_agree_personal_info" class="input-label access_terms_agree">개인정보 수집/이용에 동의합니다.</label>
        <i class="personal_info_content material-icons small confirm_content_btn">chevron_right</i>
      </div>
      
    </div>

    

      <!-- <div class="agree_receive_sms_wrapper">
        <input type="checkbox" id="receive_sms">
        <label for="receive_sms" class="input-label receive_sms">SMS를 통해 코디몬스터의 다양한 정보를 받아보겠습니다.</label>
      </div>

      <p class="margin5vh"></p>

      <span class="access_terms">이용약관</span>
      <div class="access_terms_wrapper">
        <input type="checkbox" id="access_terms_agree_all">
        <label for="access_terms_agree_all" class="input-label access_terms_agree">약관 전체동의</label>
        <div class="divider_gray"></div>
        <input type="checkbox" id="access_terms_agree">
        <label for="access_terms_agree" class="input-label access_terms_agree">이용약관에 동의합니다.</label>
        <i class="access_terms_content material-icons small confirm_content_btn">chevron_right</i>
        <br>
        <input type="checkbox" id="access_terms_agree_personal_info">
        <label for="access_terms_agree_personal_info" class="input-label access_terms_agree">개인정보 수집/이용에 동의합니다.</label>
        <i class="personal_info_content material-icons small confirm_content_btn">chevron_right</i>
      </div> -->



    <!-- <div id="question_wrapper">
      <div class="question">
        <span id="question_content"> 당신은 옷 쇼핑을 즐기시는 편인가요? </span>
      </div>
      <div class="question_detail">
      </div>
    </div> -->

    <p class="margin5vh"></p>

    <footer>
      <div class="footer_wrapper">
        <a id="next_btn" class="waves-effect waves-light btn btn_long default-blue">코디몬스터 회원가입</a>
      </div>
    </footer>

    <script>

      $(function() {
        // '뒤로가기' 버튼 클릭
        $('#back_btn').on('click', function() {
          location.href="sign_up_1.html";
        });

        // '다음' 버튼 클릭
        // $('#next_btn').on('click', function() {
        //   location.href="sign_up_finish.html";
        // });

        $('#next_btn').on('click', function() {
          var idInput = $('#sign_up_container input[id=input_id]');
          var pwInput = $('#sign_up_container input[id=input_password]');
          var puConfirmInput = $('#sign_up_container input[id=input_password_confirm]');
          var telInput = $('#sign_up_container input[id=input_phone_num]');
          var telConfirmInput = $('#sign_up_container input[id=input_confirm_num]');
          var agreeCheck = $('#sign_up_container input[id=access_terms_agree_all]:checkbox');

          if(!idInput.val() || $.trim(idInput.val()) == "") {
            alert('아이디를 입력해주세요');
            idInput.focus();
            return false;
          }

          if($.trim(idInput.val()).length < 3 || $.trim(idInput.val()).length > 15) {
            alert('아이디를 3~15로 입력해주세요');
            idInput.focus();
            return false;
          }

          if(!pwInput.val() || $.trim(pwInput.val()) == "") {
            alert('비밀번호를 입력해주세요');
            pwInput.focus();
            return false;
          }

          if(!puConfirmInput.val() || $.trim(puConfirmInput.val()) == "") {
            alert('비밀번호를 확인해주세요');
            puConfirmInput.focus();
            return false;
          }

          if(!telInput.val() || $.trim(telInput.val()) == "") {
            alert('연락처를 입력해주세요');
            telInput.focus();
            return false;
          }

          if(!telConfirmInput.val() || $.trim(telConfirmInput.val()) == "") {
            alert('인증번호를 입력해주세요');
            telConfirmInput.focus();
            return false;
          }

          if(!agreeCheck.is(':checked')) {
            alert('이용약관 및 개인정보 수집/이용에 동의해주세요');
            agreeCheck.focus();
            return false;
          }

          $.post("http://192.168.0.8:2012/user/sign_up", {
            id : $.trim(idInput.val()), 
            pw : $.trim(pwInput.val()), 
            tel : $.trim(telInput.val())
          })
          .done(function(res){
            var response = res.split(' ');
            if(response[0] == "200") {
              sessionStorage.setItem('id', response[1]);
              location.href="sign_up_finish.html";
            } else {
              alert('회원가입이 완료되지 않았습니다');
            }
          });
          // return location.href="sign_up_finish.html";
        });


        $('label[for=access_terms_agree_all]').on('click', function() {
          if($("input[id=access_terms_agree]:checkbox").is(":checked")
          && $("input[id=access_terms_agree_personal_info]:checkbox").is(":checked")) {
            $("input[id=access_terms_agree]:checkbox").prop("checked", false);
            $("input[id=access_terms_agree_personal_info]:checkbox").prop("checked", false);
          } else {
            $("input[id=access_terms_agree]:checkbox").prop("checked", true);
            $("input[id=access_terms_agree_personal_info]:checkbox").prop("checked", true);
          }
        });

        $('label[for=access_terms_agree]').on('click', function() {
          if($("input[id=access_terms_agree_all]:checkbox").is(":checked")){
            $("input[id=access_terms_agree_all]:checkbox").prop("checked", false);
          } else if($("input[id=access_terms_agree_personal_info]:checkbox").is(":checked")) {
             $("input[id=access_terms_agree_all]:checkbox").prop("checked", true);
           }
        });

        $('label[for=access_terms_agree_personal_info]').on('click', function() {
          if($("input[id=access_terms_agree_all]:checkbox").is(":checked")){
            $("input[id=access_terms_agree_all]:checkbox").prop("checked", false);
          } else if($("input[id=access_terms_agree]:checkbox").is(":checked")) {
            $("input[id=access_terms_agree_all]:checkbox").prop("checked", true);
          }
        });


        $('.confirm_content_btn').on('click', function(e) {
          var temp_class_name = $(this).attr('class').split(' ')[0];
          if(temp_class_name == "access_terms_content") {
            alert('access_terms_content');
          } else if(temp_class_name == "personal_info_content"){
            alert('personal_info_content');
          }
        });



      });
    </script>
  </body>
</html>
